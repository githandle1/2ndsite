<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>maya's sketchbook</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="mobile.css">
    <!-- Preload critical background images -->
    <link rel="preload" as="image" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20'%3E%3Cpath d='M0 0h20v1H0zM0 0h1v20H0z' fill='%23ccc'/%3E%3C/svg%3E">
    <style>
        /* Critical CSS for immediate background grid rendering */
        body, .desktop {
            background-color: #f0ece4 !important; /* Light beige/off-white color */
            background-image: 
                linear-gradient(#ccc 1px, transparent 1px),
                linear-gradient(90deg, #ccc 1px, transparent 1px) !important;
            background-size: 20px 20px !important;
            background-attachment: fixed !important;
        }
        
        /* Ensure welcome window is always visible by default */
        .welcome-window {
            display: flex !important;
            opacity: 1 !important;
            visibility: visible !important;
            transition: opacity 0.3s ease-in-out;
        }
        
        /* Ensure stalogy info is always visible by default */
        .stalogy-info {
            display: flex !important;
            opacity: 1 !important;
            visibility: visible !important;
        }
        
        /* Page turn transition effect */
        .page-turn {
            position: fixed;
            top: 0;
            right: 0;
            width: 0;
            height: 100%;
            background-color: #f0ece4;
            z-index: 9999;
            box-shadow: -5px 0 15px rgba(0,0,0,0.2);
            pointer-events: none;
            transition: width 1.2s cubic-bezier(0.25, 0.1, 0.25, 1);
        }
        
        /* Grid pattern for the page turn */
        .page-turn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(#ccc 1px, transparent 1px),
                linear-gradient(90deg, #ccc 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0.5;
        }
        
        /* Mobile-specific styles for index page */
        @media (max-width: 768px) {
            .welcome-window {
                width: 80% !important; /* Reduced from 100% to 80% */
                max-width: 80% !important; /* Reduced from 100% to 80% */
                padding: 16px !important; /* Reduced from 20px to 16px (20% smaller) */
                margin: 0 auto !important;
                position: fixed !important;
                top: 50% !important;
                left: 50% !important;
                transform: translate(-50%, -50%) !important;
                display: flex !important;
                flex-direction: column !important;
                justify-content: center !important;
                align-items: center !important;
                text-align: center !important;
                height: auto !important;
                box-sizing: border-box !important;
                /* Restore the original thin pink border */
                border: 1px solid #ff9a9e !important; /* Pale pink border */
                border-radius: 8px !important;
                background-color: rgba(240, 236, 228, 0.9) !important; /* Slightly transparent background */
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05) !important;
            }
            
            .welcome-text {
                width: 100% !important;
                max-width: 320px !important; /* Reduced from 400px to 320px (20% smaller) */
                margin: 0 auto !important;
                display: flex !important;
                flex-direction: column !important;
                align-items: center !important;
                justify-content: center !important;
            }
            
            .welcome-text h1 {
                font-size: 19px !important; /* Reduced from 24px to 19px (approximately 20% smaller) */
                margin-bottom: 16px !important; /* Reduced from 20px to 16px */
                text-align: center !important;
            }
            
            .enter-button {
                margin-top: 16px !important; /* Reduced from 20px to 16px */
                text-align: center !important;
                width: 100% !important;
            }
            
            .enter-button a {
                display: inline-block !important;
                padding: 10px 19px !important; /* Reduced from 12px 24px to 10px 19px */
                font-size: 14px !important; /* Reduced from 16px to 14px (approximately 20% smaller) */
            }
            
            /* Hide the yellow bar on mobile */
            .desktop::after {
                display: none !important;
            }
            
            /* Ensure the stalogy info is properly positioned */
            .stalogy-info {
                position: fixed !important;
                bottom: 0 !important;
                z-index: 6 !important;
                display: flex !important;
                flex-wrap: wrap !important;
                justify-content: space-around !important;
                width: 100% !important;
                padding: 10px 5px 5px !important;
                background-color: #f0ece4 !important; /* Match the background color */
                align-items: flex-start !important; /* Align items at the top */
            }
            
            /* Style the info points */
            .info-point {
                width: 50% !important;
                margin: 5px 0 !important;
                text-align: center !important;
            }
            
            /* Special layout for date and bopping around to ensure they're on the same row and level */
            .info-point:nth-child(1),
            .info-point:nth-child(2) {
                width: 50% !important; /* Ensure they take exactly half the width each */
                margin-bottom: 15px !important; /* Add space between rows */
                display: inline-flex !important; /* Use inline-flex to keep them on the same row */
                flex-direction: column !important;
                align-items: center !important;
                justify-content: flex-start !important; /* Align content at the top */
                height: 40px !important; /* Set a fixed height for both */
            }
            
            /* Ensure the first row items have the same exact spacing */
            .info-point:nth-child(1) .point-number,
            .info-point:nth-child(2) .point-number {
                margin-bottom: 5px !important; /* Consistent spacing for both date and bopping around */
                line-height: 1.2 !important; /* Consistent line height */
            }
            
            .info-point:nth-child(1) .point-title,
            .info-point:nth-child(2) .point-title {
                line-height: 1.2 !important; /* Consistent line height */
            }
            
            /* Style the point numbers (date, bopping around, etc.) */
            .point-number {
                font-weight: bold !important;
                color: #000 !important;
                font-size: 12px !important;
                margin-bottom: 5px !important; /* Consistent spacing for all points */
            }
            
            /* Style the point titles (the values) */
            .point-title {
                font-weight: normal !important;
                color: #666 !important;
                font-size: 12px !important;
            }
            
            /* Ensure second row (wearing and listening to) are aligned */
            .info-point:nth-child(3),
            .info-point:nth-child(4) {
                margin-top: 0 !important;
                width: 50% !important; /* Ensure they take exactly half the width each */
                height: 40px !important; /* Set a fixed height for both */
            }
            
            .stalogy-title {
                font-size: 12px !important;
                padding: 6px 12px !important;
            }
            
            /* Ensure the page has enough height */
            body, .desktop {
                min-height: 100vh;
            }
            
            /* Mobile-specific page turn adjustments */
            .page-turn {
                transition: width 1.2s cubic-bezier(0.25, 0.1, 0.25, 1);
                -webkit-transition: width 1.2s cubic-bezier(0.25, 0.1, 0.25, 1);
            }
        }
    </style>
</head>
<body>
    <div class="desktop">
        <!-- Stalogy notebook elements -->
        <div class="stalogy-label">
            <div class="stalogy-title">
                <span>018 Editor's Series 365 Days Notebook</span>
            </div>
        </div>
        
        <div class="welcome-window">
            <div class="welcome-text">
                <h1>maya's sketchbook</h1>
                <div class="enter-button">
                    <a href="javascript:void(0);" onclick="pageTurn()">Enter here</a>
                </div>
            </div>
        </div>
        
        <!-- Stalogy yellow band info -->
        <div class="stalogy-info">
            <div class="info-point">
                <span class="point-number">date</span>
                <span class="point-title" id="current-date">Loading date...</span>
            </div>
            <div class="info-point">
                <span class="point-number">bopping around</span>
                <span class="point-title">NYC</span>
            </div>
            <div class="info-point">
                <span class="point-number">wearing</span>
                <span class="point-title">a lot of layers</span>
            </div>
            <div class="info-point">
                <span class="point-number">listening to</span>
                <span class="point-title"><a href="javascript:void(0);" onclick="playAudio('spotidownloader.com - I Love Video - New Paradise.mp3'); return false;" style="color: inherit; text-decoration: none;">this</a></span>
            </div>
        </div>
    </div>
    
    <!-- Hidden audio element for playing music -->
    <audio id="audio-player" style="display: none;"></audio>
    
    <!-- Page turn effect element -->
    <div class="page-turn" id="pageTurn"></div>
    
    <script src="script.js"></script>
    <script src="mobile.js"></script>
    <script>
        // Function to handle page turn effect
        function pageTurn() {
            console.log('Page turn initiated');
            
            // Get the page turn element
            const pageTurnElement = document.getElementById('pageTurn');
            if (!pageTurnElement) {
                console.error('Page turn element not found!');
                window.location.href = 'desktop.html';
                return;
            }
            
            // Save audio state if playing
            const audioPlayer = document.getElementById('audio-player');
            if (audioPlayer && !audioPlayer.paused) {
                sessionStorage.setItem('audioCurrentTime', audioPlayer.currentTime);
                console.log('Saved audio time:', audioPlayer.currentTime);
            }
            
            // Keep welcome window visible until animation completes
            const welcomeWindow = document.querySelector('.welcome-window');
            if (welcomeWindow) {
                welcomeWindow.style.display = 'flex';
                welcomeWindow.style.opacity = '1';
                welcomeWindow.style.visibility = 'visible';
            }
            
            // Ensure the page turn element is visible and properly styled
            pageTurnElement.style.position = 'fixed';
            pageTurnElement.style.top = '0';
            pageTurnElement.style.right = '0';
            pageTurnElement.style.height = '100%';
            pageTurnElement.style.width = '0';
            pageTurnElement.style.backgroundColor = '#f0ece4';
            pageTurnElement.style.zIndex = '9999';
            pageTurnElement.style.boxShadow = '-5px 0 15px rgba(0,0,0,0.2)';
            pageTurnElement.style.pointerEvents = 'none';
            
            // Add grid pattern to the page turn
            pageTurnElement.style.backgroundImage = 'linear-gradient(#ccc 1px, transparent 1px), linear-gradient(90deg, #ccc 1px, transparent 1px)';
            pageTurnElement.style.backgroundSize = '20px 20px';
            
            // Manually animate the page turn with JavaScript for better reliability
            let width = 0;
            // Speed up the animation by dividing duration by 1.25
            const isMobile = window.innerWidth <= 768;
            // Base durations: 1500ms for mobile, 1800ms for desktop
            // Speed up by 1.25x: 1200ms for mobile, 1440ms for desktop
            const duration = isMobile ? 1200 : 1440; 
            const startTime = performance.now();
            
            // Play page turn sound
            const pageTurnSound = new Audio('page-turn.mp3');
            pageTurnSound.play().catch(e => console.log('Could not play page turn sound:', e));
            
            // Create a full-screen overlay to prevent flashing
            const overlay = document.createElement('div');
            overlay.style.position = 'fixed';
            overlay.style.top = '0';
            overlay.style.left = '0';
            overlay.style.width = '100%';
            overlay.style.height = '100%';
            overlay.style.backgroundColor = '#f0ece4';
            overlay.style.zIndex = '9998';
            overlay.style.opacity = '0';
            overlay.style.transition = 'opacity 0.2s ease-in';
            overlay.style.pointerEvents = 'none';
            document.body.appendChild(overlay);
            
            function animate(currentTime) {
                const elapsedTime = currentTime - startTime;
                const progress = Math.min(elapsedTime / duration, 1);
                
                // Use a more graceful easing function for a smoother sweep
                // This creates a gentle acceleration at the start and deceleration at the end
                const easedProgress = 0.5 - 0.5 * Math.cos(Math.PI * progress);
                
                // For mobile, ensure we go beyond 100% to account for any potential viewport issues
                // Increase the max width to 120% for mobile to ensure full coverage with the faster animation
                const maxWidth = isMobile ? 120 : 105; 
                width = easedProgress * maxWidth;
                pageTurnElement.style.width = width + '%';
                
                // Add subtle shadow intensity based on progress for more depth
                const shadowIntensity = Math.min(20, 5 + (15 * easedProgress));
                pageTurnElement.style.boxShadow = `-${shadowIntensity}px 0 25px rgba(0,0,0,${0.1 + (easedProgress * 0.15)})`;
                
                // Use transform for better performance
                pageTurnElement.style.transform = `translateZ(0)`; // Force GPU acceleration
                
                if (progress < 1) {
                    // Use high priority for the animation frame
                    window.requestAnimationFrame(animate);
                } else {
                    // When animation is complete, fade in the overlay to prevent flash
                    overlay.style.opacity = '1';
                    
                    // Then navigate to desktop.html after a very short delay
                    // This ensures the overlay is visible before navigation
                    setTimeout(() => {
                        // Store a flag to indicate we're coming from a page turn
                        sessionStorage.setItem('fromPageTurn', 'true');
                        window.location.href = 'desktop.html';
                    }, 100);
                }
            }
            
            // Start the animation with high priority
            window.requestAnimationFrame(animate);
        }
        
        // Function to play audio file
        function playAudio(audioFile) {
            const audioPlayer = document.getElementById('audio-player');
            
            // If already playing the same song, toggle play/pause
            if (audioPlayer.src.includes(audioFile) && !audioPlayer.paused) {
                audioPlayer.pause();
                sessionStorage.removeItem('currentlyPlaying');
                sessionStorage.removeItem('audioCurrentTime');
            } else {
                audioPlayer.src = audioFile;
                audioPlayer.play();
                // Store the current audio file and timestamp in sessionStorage
                sessionStorage.setItem('currentlyPlaying', audioFile);
                
                // Add event listener to update current time in sessionStorage
                audioPlayer.addEventListener('timeupdate', function() {
                    sessionStorage.setItem('audioCurrentTime', audioPlayer.currentTime);
                });
            }
        }
        
        // Modify the Enter button to preserve audio state
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded on index page');
            
            const enterButton = document.querySelector('.enter-button a');
            if (enterButton) {
                // Remove any existing click handlers
                const newEnterButton = enterButton.cloneNode(true);
                enterButton.parentNode.replaceChild(newEnterButton, enterButton);
                
                // Add new click handler
                newEnterButton.addEventListener('click', function(e) {
                    e.preventDefault(); // Prevent default navigation
                    console.log('Enter button clicked');
                    pageTurn(); // Call our page turn function
                });
            } else {
                console.error('Enter button not found!');
            }
            
            // Function to detect mobile devices and adjust UI
            detectMobileAndAdjustUI();
        });
        
        // Function to detect mobile devices and adjust UI
        function detectMobileAndAdjustUI() {
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth <= 768;
            
            if (isMobile) {
                // Add mobile class to body for CSS targeting
                document.body.classList.add('mobile-device');
                
                // Adjust stalogy info for mobile
                const stalogyInfo = document.querySelector('.stalogy-info');
                if (stalogyInfo) {
                    stalogyInfo.style.flexWrap = 'wrap';
                    stalogyInfo.style.padding = '5px 10px';
                    stalogyInfo.style.height = 'auto';
                }
                
                // Adjust info points for mobile
                const infoPoints = document.querySelectorAll('.info-point');
                infoPoints.forEach(point => {
                    point.style.width = '50%';
                    point.style.margin = '5px 0';
                });
            }
        }
        
        // Also call it on orientation change
        window.addEventListener('orientationchange', detectMobileAndAdjustUI);
        
        // Handle page visibility changes to ensure content is displayed when navigating back
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden) {
                console.log('Page is now visible - ensuring content is displayed');
                
                // Make sure welcome window is visible
                const welcomeWindow = document.querySelector('.welcome-window');
                if (welcomeWindow) {
                    welcomeWindow.style.display = 'flex';
                    welcomeWindow.style.opacity = '1';
                }
                
                // Make sure stalogy info is visible
                const stalogyInfo = document.querySelector('.stalogy-info');
                if (stalogyInfo) {
                    stalogyInfo.style.display = 'flex';
                    stalogyInfo.style.opacity = '1';
                }
                
                // Reset page turn element
                const pageTurnElement = document.getElementById('pageTurn');
                if (pageTurnElement) {
                    pageTurnElement.style.width = '0';
                }
                
                // Re-apply mobile UI adjustments if needed
                detectMobileAndAdjustUI();
            }
        });
        
        // Ensure content is displayed when page loads or when navigating back
        window.addEventListener('pageshow', function(event) {
            // This triggers even when navigating back via browser history
            if (event.persisted) {
                console.log('Page loaded from cache (back navigation) - ensuring content is displayed');
                
                // Make sure welcome window is visible
                const welcomeWindow = document.querySelector('.welcome-window');
                if (welcomeWindow) {
                    welcomeWindow.style.display = 'flex';
                    welcomeWindow.style.opacity = '1';
                }
                
                // Make sure stalogy info is visible
                const stalogyInfo = document.querySelector('.stalogy-info');
                if (stalogyInfo) {
                    stalogyInfo.style.display = 'flex';
                    stalogyInfo.style.opacity = '1';
                }
                
                // Reset page turn element
                const pageTurnElement = document.getElementById('pageTurn');
                if (pageTurnElement) {
                    pageTurnElement.style.width = '0';
                }
                
                // Re-apply mobile UI adjustments
                detectMobileAndAdjustUI();
            }
        });
    </script>
</body>
</html> 