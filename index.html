<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>maya's sketchbook</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="mobile.css">
    <!-- Preload critical background images -->
    <link rel="preload" as="image" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20'%3E%3Cpath d='M0 0h20v1H0zM0 0h1v20H0z' fill='%23ccc'/%3E%3C/svg%3E">
    <style>
        /* Critical CSS for immediate background grid rendering */
        body, .desktop {
            background-color: #f0ece4 !important; /* Light beige/off-white color */
            background-image: 
                linear-gradient(#ccc 1px, transparent 1px),
                linear-gradient(90deg, #ccc 1px, transparent 1px) !important;
            background-size: 20px 20px !important;
            background-attachment: fixed !important;
        }
        
        /* Page turn transition effect */
        .page-turn {
            position: fixed;
            top: 0;
            right: 0;
            width: 0;
            height: 100%;
            background-color: #f0ece4;
            z-index: 9999;
            box-shadow: -5px 0 15px rgba(0,0,0,0.2);
            pointer-events: none;
        }
        
        /* Grid pattern for the page turn */
        .page-turn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(#ccc 1px, transparent 1px),
                linear-gradient(90deg, #ccc 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0.5;
        }
        
        /* Mobile-specific styles for index page */
        @media (max-width: 768px) {
            .welcome-window {
                width: 100% !important;
                max-width: 100% !important;
                padding: 20px !important;
                margin: 0 auto !important;
                position: fixed !important;
                top: 50% !important;
                left: 50% !important;
                transform: translate(-50%, -50%) !important;
                display: flex !important;
                flex-direction: column !important;
                justify-content: center !important;
                align-items: center !important;
                text-align: center !important;
                height: auto !important;
                box-sizing: border-box !important;
            }
            
            .welcome-text {
                width: 100% !important;
                max-width: 400px !important;
                margin: 0 auto !important;
                display: flex !important;
                flex-direction: column !important;
                align-items: center !important;
                justify-content: center !important;
            }
            
            .welcome-text h1 {
                font-size: 24px !important;
                margin-bottom: 20px !important;
                text-align: center !important;
            }
            
            .enter-button {
                margin-top: 20px !important;
                text-align: center !important;
                width: 100% !important;
            }
            
            .enter-button a {
                display: inline-block !important;
                padding: 12px 24px !important;
                font-size: 16px !important;
            }
            
            /* Hide the yellow bar on mobile */
            .desktop::after {
                display: none !important;
            }
            
            /* Ensure the stalogy info is properly positioned */
            .stalogy-info {
                position: fixed !important;
                bottom: 0 !important;
                z-index: 6 !important;
                display: flex !important;
                flex-wrap: wrap !important;
                justify-content: space-around !important;
                width: 100% !important;
                padding: 10px 5px 5px !important;
                background-color: #f0ece4 !important; /* Match the background color */
                align-items: flex-start !important; /* Align items at the top */
            }
            
            /* Style the info points */
            .info-point {
                width: 50% !important;
                margin: 5px 0 !important;
                text-align: center !important;
            }
            
            /* Special layout for date and bopping around to ensure they're on the same row and level */
            .info-point:nth-child(1),
            .info-point:nth-child(2) {
                width: 50% !important; /* Ensure they take exactly half the width each */
                margin-bottom: 15px !important; /* Add space between rows */
                display: inline-flex !important; /* Use inline-flex to keep them on the same row */
                flex-direction: column !important;
                align-items: center !important;
                justify-content: flex-start !important; /* Align content at the top */
                height: 40px !important; /* Set a fixed height for both */
            }
            
            /* Ensure the first row items have the same exact spacing */
            .info-point:nth-child(1) .point-number,
            .info-point:nth-child(2) .point-number {
                margin-bottom: 5px !important; /* Consistent spacing for both date and bopping around */
                line-height: 1.2 !important; /* Consistent line height */
            }
            
            .info-point:nth-child(1) .point-title,
            .info-point:nth-child(2) .point-title {
                line-height: 1.2 !important; /* Consistent line height */
            }
            
            /* Style the point numbers (date, bopping around, etc.) */
            .point-number {
                font-weight: bold !important;
                color: #000 !important;
                font-size: 12px !important;
                margin-bottom: 5px !important; /* Consistent spacing for all points */
            }
            
            /* Style the point titles (the values) */
            .point-title {
                font-weight: normal !important;
                color: #666 !important;
                font-size: 12px !important;
            }
            
            /* Ensure second row (wearing and listening to) are aligned */
            .info-point:nth-child(3),
            .info-point:nth-child(4) {
                margin-top: 0 !important;
                width: 50% !important; /* Ensure they take exactly half the width each */
                height: 40px !important; /* Set a fixed height for both */
            }
            
            .stalogy-title {
                font-size: 12px !important;
                padding: 6px 12px !important;
            }
            
            /* Ensure the page has enough height */
            body, .desktop {
                min-height: 100vh;
            }
            
            /* Mobile-specific page turn adjustments */
            .page-turn {
                transition: width 0.6s ease-in-out;
                -webkit-transition: width 0.6s ease-in-out;
            }
        }
    </style>
</head>
<body>
    <div class="desktop">
        <!-- Stalogy notebook elements -->
        <div class="stalogy-label">
            <div class="stalogy-title">
                <span>018 Editor's Series 365 Days Notebook</span>
            </div>
        </div>
        
        <div class="welcome-window">
            <div class="welcome-text">
                <h1>maya's sketchbook</h1>
                <div class="enter-button">
                    <a href="javascript:void(0);" onclick="pageTurn()">Enter here</a>
                </div>
            </div>
        </div>
        
        <!-- Stalogy yellow band info -->
        <div class="stalogy-info">
            <div class="info-point">
                <span class="point-number">date</span>
                <span class="point-title" id="current-date">Loading date...</span>
            </div>
            <div class="info-point">
                <span class="point-number">bopping around</span>
                <span class="point-title">NYC</span>
            </div>
            <div class="info-point">
                <span class="point-number">wearing</span>
                <span class="point-title">a lot of layers</span>
            </div>
            <div class="info-point">
                <span class="point-number">listening to</span>
                <span class="point-title"><a href="javascript:void(0);" onclick="playAudio('spotidownloader.com - I Love Video - New Paradise.mp3'); return false;" style="color: inherit; text-decoration: none;">this</a></span>
            </div>
        </div>
    </div>
    
    <!-- Hidden audio element for playing music -->
    <audio id="audio-player" style="display: none;"></audio>
    
    <!-- Page turn effect element -->
    <div class="page-turn" id="pageTurn"></div>
    
    <script src="script.js"></script>
    <script src="mobile.js"></script>
    <script>
        // Function to handle page turn effect
        function pageTurn() {
            // Get the page turn element
            const pageTurnElement = document.getElementById('pageTurn');
            
            // Save audio state if playing
            const audioPlayer = document.getElementById('audio-player');
            if (audioPlayer && !audioPlayer.paused) {
                sessionStorage.setItem('audioCurrentTime', audioPlayer.currentTime);
            }
            
            // Manually animate the page turn with JavaScript for better reliability
            let width = 0;
            const duration = window.innerWidth <= 768 ? 600 : 800; // Shorter on mobile
            const startTime = performance.now();
            
            function animate(currentTime) {
                const elapsedTime = currentTime - startTime;
                const progress = Math.min(elapsedTime / duration, 1);
                
                // Ease-in-out timing function
                const easedProgress = progress < 0.5 
                    ? 2 * progress * progress 
                    : 1 - Math.pow(-2 * progress + 2, 2) / 2;
                
                width = easedProgress * 100; // 0 to 100%
                pageTurnElement.style.width = width + '%';
                
                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    // Animation complete, navigate to desktop.html
                    window.location.href = 'desktop.html';
                }
            }
            
            // Start the animation
            requestAnimationFrame(animate);
        }
        
        // Function to play audio file
        function playAudio(audioFile) {
            const audioPlayer = document.getElementById('audio-player');
            
            // If already playing the same song, toggle play/pause
            if (audioPlayer.src.includes(audioFile) && !audioPlayer.paused) {
                audioPlayer.pause();
                sessionStorage.removeItem('currentlyPlaying');
                sessionStorage.removeItem('audioCurrentTime');
            } else {
                audioPlayer.src = audioFile;
                audioPlayer.play();
                // Store the current audio file and timestamp in sessionStorage
                sessionStorage.setItem('currentlyPlaying', audioFile);
                
                // Add event listener to update current time in sessionStorage
                audioPlayer.addEventListener('timeupdate', function() {
                    sessionStorage.setItem('audioCurrentTime', audioPlayer.currentTime);
                });
            }
        }
        
        // Modify the Enter button to preserve audio state
        document.addEventListener('DOMContentLoaded', function() {
            const enterButton = document.querySelector('.enter-button a');
            if (enterButton) {
                enterButton.addEventListener('click', function(e) {
                    const audioPlayer = document.getElementById('audio-player');
                    if (audioPlayer && !audioPlayer.paused) {
                        // Update the current time right before navigation
                        sessionStorage.setItem('audioCurrentTime', audioPlayer.currentTime);
                    }
                });
            }
        });
        
        // Function to detect mobile devices and adjust UI
        function detectMobileAndAdjustUI() {
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth <= 768;
            
            if (isMobile) {
                // Add mobile class to body for CSS targeting
                document.body.classList.add('mobile-device');
                
                // Adjust stalogy info for mobile
                const stalogyInfo = document.querySelector('.stalogy-info');
                if (stalogyInfo) {
                    stalogyInfo.style.flexWrap = 'wrap';
                    stalogyInfo.style.padding = '5px 10px';
                    stalogyInfo.style.height = 'auto';
                }
                
                // Adjust info points for mobile
                const infoPoints = document.querySelectorAll('.info-point');
                infoPoints.forEach(point => {
                    point.style.width = '50%';
                    point.style.margin = '5px 0';
                });
            }
        }
        
        // Call the function when the page loads
        document.addEventListener('DOMContentLoaded', detectMobileAndAdjustUI);
        
        // Also call it on orientation change
        window.addEventListener('orientationchange', detectMobileAndAdjustUI);
    </script>
</body>
</html> 